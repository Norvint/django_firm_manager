{% extends 'base.html' %}

{% block title %}Спецификации{% endblock %}

{% block content %}

<ul class="nav nav-pills pt-2 pb-2">
  <li class="nav-item">
    <a class="nav-link active mr-2" aria-current="page" href="{% url 'orders_list' %}">Заказы</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" aria-current="page" href="{% url 'delivery_conditions_list' %}">Условия поставки</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="{% url 'payment_conditions_list' %}">Условия оплаты</a>
  </li>
</ul>

<form action="" method="post" class="mb-2">
    {% csrf_token %}
    <div class="d-flex flex-row col-6 justify-content-between mb-2">
        <div class="d-flex flex-column col-3">
            {{ filter.created_after.errors }}
            {{ filter.created_after.label }}
            {{ filter.created_after }}
        </div>

        <div class="d-flex flex-column col-3">
            {{ filter.created_before.errors }}
            {{ filter.created_before.label }}
            {{ filter.created_before }}
        </div>

        <div class="d-flex flex-column col-4">
            {{ filter.contractor.errors }}
            {{ filter.contractor.label }}
            {{ filter.contractor }}
        </div>

        <div class="col-1 mt-3">
            <button type="submit" class="btn btn-secondary">Отсортировать</button>
        </div>
    </div>
</form>

<h1>Заказы</h1>
<a href="{% url 'order_create' 0 0 %}" class="btn btn-primary mb-3">Добавить заказ</a>

{% if orders %}
<table class="table table-striped">
    <thead>
    <tr>
        <th scope="col">Номер</th>
        <th scope="col">Договор</th>
        <th scope="col">Контрагент</th>
    </tr>
    </thead>
    <tbody>
    {% for order in orders %}
    <tr class="{% if order.to_delete %} text-white bg-secondary {% endif %}">
        <td>
            <a class="{% if order.to_delete %} text-white {% else %} text-reset {% endif %}"
               href="{% url 'order_detail' order.id %}">{{ order.number }}</a>
        </td>
        <td>
            <a class="{% if order.to_delete %} text-white {% else %} text-reset {% endif %}"
               href="{% url 'contract_detail' order.contract.id %}">{{ order.contract }}</a>
        </td>
        <td>
            <a class="{% if order.to_delete %} text-white {% else %} text-reset {% endif %}"
               href="{% url 'contractor_detail' order.contract.contractor.id %}">{{ order.contract.contractor }}</a>
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endif %}
{% endblock %}