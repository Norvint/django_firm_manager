{% extends 'base.html' %}

{% block title %}Спецификации{% endblock %}

{% block content %}

<ul class="nav nav-pills pt-2 pb-2">
  <li class="nav-item">
    <a class="nav-link active mr-2" aria-current="page" href="{% url 'specifications_list' %}">Спецификации</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" aria-current="page" href="{% url 'delivery_conditions_list' %}">Условия поставки</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="{% url 'payment_conditions_list' %}">Условия оплаты</a>
  </li>
</ul>

<form action="" method="post" class="mb-2">
    {% csrf_token %}
    <div class="d-flex flex-row col-6 justify-content-between mb-2">
        <div class="d-flex flex-column col-3">
            {{ filter.created_after.errors }}
            {{ filter.created_after.label }}
            {{ filter.created_after }}
        </div>

        <div class="d-flex flex-column col-3">
            {{ filter.created_before.errors }}
            {{ filter.created_before.label }}
            {{ filter.created_before }}
        </div>

        <div class="d-flex flex-column col-4">
            {{ filter.contractor.errors }}
            {{ filter.contractor.label }}
            {{ filter.contractor }}
        </div>

        <div class="col-1 mt-3">
            <button type="submit" class="btn btn-secondary">Отсортировать</button>
        </div>
    </div>
</form>

<h1>Спецификации</h1>
<a href="{% url 'specification_create' 0 %}" class="btn btn-primary mb-3">Добавить спецификацию</a>

{% if specifications %}
<div class="row">
    {% for specification in specifications %}
    {% if specification.to_delete %}
    <div class="mb-5 col-4">
        <div class="card text-white bg-secondary">
            <div class="card-body">
                <h5 class="card-title">Спецификация №{{ specification.number }}</h5>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item bg-secondary">Договор: {{ specification.contract }}</li>
            </ul>
            <ul class="list-group list-group-flush">
                <li class="list-group-item bg-secondary">Клиент: {{ specification.contract.contractor }}</li>
            </ul>
            <div class="card-body">
                <a href="{% url 'specification_detail' specification.id %}" class="btn btn-primary">Открыть</a>
            </div>
        </div>
    </div>
    {% else %}
    <div class="mb-5 col-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Спецификация №{{ specification.number }}</h5>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">Договор: {{ specification.contract }}</li>
            </ul>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">Клиент: {{ specification.contract.contractor }}</li>
            </ul>
            <div class="card-body">
                <a href="{% url 'specification_detail' specification.id %}" class="btn btn-primary">Открыть</a>
            </div>
        </div>
    </div>
    {% endif %}
    {% endfor %}
</div>
{% endif %}
{% endblock %}