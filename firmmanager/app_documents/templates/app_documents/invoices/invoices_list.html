{% extends 'base.html' %}

{% block title %}Инвойсы{% endblock %}

{% block content %}

<form action="" method="post" class="mb-2">
    {% csrf_token %}
    <div class="d-flex flex-row col-6 justify-content-between mb-2">
        <div class="d-flex flex-column col-3">
            {{ filter.created_after.errors }}
            {{ filter.created_after.label }}
            {{ filter.created_after }}
        </div>

        <div class="d-flex flex-column col-3">
            {{ filter.created_before.errors }}
            {{ filter.created_before.label }}
            {{ filter.created_before }}
        </div>

        <div class="d-flex flex-column col-4">
            {{ filter.contractor.errors }}
            {{ filter.contractor.label }}
            {{ filter.contractor }}
        </div>

        <div class="col-1 mt-3">
            <button type="submit" class="btn btn-secondary">Отсортировать</button>
        </div>
    </div>
</form>

<h1>Инвойсы</h1>
<a href="{% url 'invoice_create' 0 %}" class="btn btn-primary mb-3">Добавить инвойс</a>

{% if invoices %}
<div class="row">
    {% for invoice in invoices %}
    {% if invoice.to_delete %}
    <div class="mb-5 col-4">
        <div class="card text-white bg-secondary">
            <div class="card-body">
                <h5 class="card-title">Инвойс №{{ invoice.number }}</h5>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item bg-secondary">Спецификация: {{ invoice.specification }}</li>
                <li class="list-group-item bg-secondary">Клиент: {{ invoice.specification.contract.contractor }}</li>
            </ul>
            <div class="card-body">
                <a href="{% url 'invoice_detail' invoice.id %}" class="btn btn-primary">Открыть</a>
            </div>
        </div>
    </div>
    {% else %}
    <div class="mb-5 col-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Инвойс №{{ invoice.number }}</h5>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">Спецификация: {{ invoice.specification }}</li>
                <li class="list-group-item">Клиент: {{ invoice.specification.contract.contractor }}</li>
            </ul>
            <div class="card-body">
                <a href="{% url 'invoice_detail' invoice.id %}" class="btn btn-primary">Открыть</a>
            </div>
        </div>
    </div>
    {% endif %}
    {% endfor %}
</div>
{% endif %}
{% endblock %}