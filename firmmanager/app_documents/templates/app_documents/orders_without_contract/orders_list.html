{% extends 'base.html' %}

{% block title %}Заказы без договора{% endblock %}

{% block content %}

<form action="" method="post" class="mb-2">
    {% csrf_token %}
    <div class="d-flex flex-row col-6 justify-content-between mb-2">
        <div class="d-flex flex-column col-3">
            {{ filter.created_after.errors }}
            {{ filter.created_after.label }}
            {{ filter.created_after }}
        </div>

        <div class="d-flex flex-column col-3">
            {{ filter.created_before.errors }}
            {{ filter.created_before.label }}
            {{ filter.created_before }}
        </div>

        <div class="d-flex flex-column col-4">
            {{ filter.contractor.errors }}
            {{ filter.contractor.label }}
            {{ filter.contractor }}
        </div>

        <div class="col-1 mt-3">
            <button type="submit" class="btn btn-secondary">Отсортировать</button>
        </div>
    </div>
</form>

<h1>Заказы без договора</h1>
<a href="{% url 'order_without_contract_create' 0 %}" class="btn btn-primary mb-3">Добавить заказ</a>

{% if orders %}
<table class="table table-striped">
    <thead>
    <tr>
        <th scope="col">Номер</th>
        <th scope="col">Контрагент</th>
        <th scope="col">Организация</th>
    </tr>
    </thead>
    <tbody>
    {% for order in orders %}
    <tr class="{% if contract.to_delete %} text-white bg-secondary {% endif %}">
        <td>
            <a class="{% if order.to_delete %} text-white {% else %} text-reset {% endif %}"
               href="{% url 'order_without_contract_detail' order.id %}">{{ order.number }}</a>
        </td>
        <td>
            <a class="{% if order.to_delete %} text-white {% else %} text-reset {% endif %}"
               href="{% url 'contractor_detail' order.contractor.id %}">{{ order.contractor }}</a>
        </td>
        <td>
            <a class="{% if order.to_delete %} text-white {% else %} text-reset {% endif %}"
               href="{% url 'organization_detail' order.organization.id %}">{{ order.organization }}</a>
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endif %}
{% endblock %}