{% extends 'base.html' %}

{% block title %}Договоры{% endblock %}

{% block content %}
<div class="dropdown">
    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
       data-bs-toggle="dropdown" aria-expanded="false">
        Навигация по контрагенту
    </a>
    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
        <li>
            <a href="{% url 'contractor_detail' contractor_id %}"
               class="dropdown-item">Контрагент</a>
        </li>

        <li>
            <a href="{% url 'contractor_orders_list' contractor_id %}"
               class="dropdown-item">Заказы</a>
        </li>

        <li>
            <a href="{% url 'contact_persons_list' contractor_id %}" class="dropdown-item">Контактные
                лица контрагента</a>
        </li>
    </ul>
</div>

<h1>Договоры</h1>

<a href="{% url 'contract_create' %}" class="btn btn-primary mb-3">Добавить договор</a>

{% if contracts %}
<div class="row">
    {% for contract in contracts %}
    {% if contract.to_delete %}
    <div class="mb-5 col-4">
        <div class="card text-white bg-secondary">
            <div class="card-body">
                <h5 class="card-title">{{ contract.contractor }}</h5>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item bg-secondary">Номер: {{ contract.number }}</li>
                <li class="list-group-item bg-secondary">Дата создания: {{ contract.created }}</li>
            </ul>
            <div class="card-body">
                <a href="{% url 'contract_detail' contract.id %}" class="btn btn-primary">Открыть</a>
            </div>
        </div>
    </div>
    {% else %}
    <div class="mb-5 col-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">{{ contract.contractor }}</h5>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">Номер: {{ contract.number }}</li>
                <li class="list-group-item">Дата создания: {{ contract.created }}</li>
            </ul>
            <div class="card-body">
                <a href="{% url 'contract_detail' contract.id %}" class="btn btn-primary">Открыть</a>
            </div>
        </div>
    </div>
    {% endif %}
    {% endfor %}
</div>
{% endif %}
{% endblock %}