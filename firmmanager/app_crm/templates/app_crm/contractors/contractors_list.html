{% extends 'base.html' %}

{% block title %}Все контрагенты{% endblock %}

{% block content %}
<form action="" method="post">
    {% csrf_token %}
    <div class="d-flex flex-row col-6 justify-content-between mb-2">
        <div class="d-flex flex-column col-3">
            {{ filter.country.errors }}
            {{ filter.country.label }}
            {{ filter.country }}
        </div>

        <div class="d-flex flex-column col-3">
            {{ filter.type_of_contractor.errors }}
            {{ filter.type_of_contractor.label }}
            {{ filter.type_of_contractor }}
        </div>

        <div class="d-flex flex-column col-3">
            {{ filter.field_of_activity.errors }}
            {{ filter.field_of_activity.label }}
            {{ filter.field_of_activity }}
        </div>
        <button class="btn btn-secondary mt-3 mb-3" type="submit">Отсортировать</button>
    </div>
</form>
<h1>Контрагенты</h1>
<a href="{% url 'contractor_create' %}" class="btn btn-primary mb-3">Добавить контрагента</a>

{% if contractors %}
<div class="row">
    {% for contractor in contractors %}
    <div class="mb-5 col-4">
        {% if contractor.to_delete %}
        <div class="card text-white bg-secondary">
            <div class="card-body">
                <h5 class="card-title">{{ contractor.title }}</h5>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item bg-secondary">Должность: {{ contractor.position }}</li>
                <li class="list-group-item bg-secondary">Имя: {{ contractor.name }}</li>
                <li class="list-group-item bg-secondary">Фамилия: {{ contractor.last_name }}</li>
                <li class="list-group-item bg-secondary">Страна: {{ contractor.country }}</li>
            </ul>
            <div class="card-body">
                <a href="{% url 'contractor_detail' contractor.id %}" class="btn btn-primary">Открыть</a>
            </div>
        </div>
        {% else %}
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">{{ contractor.title }}</h5>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">Должность: {{ contractor.position }}</li>
                <li class="list-group-item">Имя: {{ contractor.name }}</li>
                <li class="list-group-item">Фамилия: {{ contractor.last_name }}</li>
                <li class="list-group-item">Страна: {{ contractor.country }}</li>
            </ul>
            <div class="card-body">
                <a href="{% url 'contractor_detail' contractor.id %}" class="btn btn-primary">Открыть</a>
            </div>
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endif %}
{% endblock %}