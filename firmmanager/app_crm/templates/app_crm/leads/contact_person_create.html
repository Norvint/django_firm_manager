{% extends 'base.html' %}

{% block title %}Добавить новое контактное лицо лида{% endblock %}
{% load static %}
{% block content %}

<form name="contact-person-create-form" method="post">
    {% csrf_token %}
    <div class="card">
        <div class="card-body">
            <h3>Новое контактное лицо лида</h3>
        </div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item d-flex justify-content-between">
                <div>
                    {{ form.name.errors }}
                    <label>{{ form.name.label }}</label>
                    {{ form.name }}
                </div>

                <div>
                    {{ form.second_name.errors }}
                    <label>{{ form.second_name.label }}</label>
                    {{ form.second_name }}
                </div>

                <div>
                    {{ form.last_name.errors }}
                    <label>{{ form.last_name.label }}</label>
                    {{ form.last_name }}
                </div>
            </li>

            <li class="list-group-item d-flex justify-content-between">
                <div>
                    {{ form.position.errors }}
                    <label>{{ form.position.label }}</label>
                    {{ form.position }}
                </div>

                <div>
                    {{ form.lead.errors }}
                    <label>{{ form.lead.label }}</label>
                    {{ form.lead }}
                </div>

                <div>
                    {{ form.tag.errors }}
                    <label>{{ form.tag.label }}</label>
                    {{ form.tag }}
                </div>
            </li>
        </ul>
    </div>
    <table class="table" id="contact-form-wrapper">
        {{ formset.management_form }}
        <thead>
        <tr>
            <th scope="col">Тип контакта</th>
            <th scope="col">Контактные данные</th>
        </tr>
        </thead>
        <tbody>
        {% for contact_form in formset %}
        <tr class="contact-form-container">
            <td>
                {{ contact_form.type_of_contact.errors }}
                {{ contact_form.type_of_contact }}
            </td>

            <td>
                {{ contact_form.errors }}
                {{ contact_form.contact }}
            </td>
        </tr>
        {% endfor %}

        </tbody>
        <tfoot>
        <tr>
            <td>
                <a href="#" id="add_contact" class="btn btn-success col-1 mt-2 fw-bold">
                    +
                </a>
            </td>

            <td>

            </td>

            <td>

            </td>
        </tr>
        </tfoot>
    </table>
    <div>
        <input type="submit" value="Сохранить контактное лицо" class="btn btn-primary mt-2">
    </div>

</form>

{% block extrascripts %}
<script type="text/JavaScript" src="{%  static 'app_crm/js/contact.js' %}"></script>
{% endblock %}

{% endblock %}